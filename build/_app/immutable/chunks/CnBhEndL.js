var F=Object.defineProperty;var w=t=>{throw TypeError(t)};var x=(t,e,s)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var E=(t,e,s)=>x(t,typeof e!="symbol"?e+"":e,s),A=(t,e,s)=>e.has(t)||w("Cannot "+s);var a=(t,e,s)=>(A(t,e,"read from private field"),s?s.call(t):e.get(t)),l=(t,e,s)=>e.has(t)?w("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),S=(t,e,s,r)=>(A(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);import{a1 as M,ac as C,ah as y,ad as U,J as N,a3 as R,B as k,U as I,aB as O,a4 as Y,b as j,W as H,E as J,X as L,Y as P,Z as W,T as X,R as B,au as D,a6 as Z,j as $,a as q,aC as z,w as G}from"./B2Klhsja.js";import{s as K,g as Q}from"./D1Qv_7jF.js";var h,d,o,_,p,v,g;class V{constructor(e,s=!0){E(this,"anchor");l(this,h,new Map);l(this,d,new Map);l(this,o,new Map);l(this,_,new Set);l(this,p,!0);l(this,v,()=>{var e=M;if(a(this,h).has(e)){var s=a(this,h).get(e),r=a(this,d).get(s);if(r)C(r),a(this,_).delete(s);else{var f=a(this,o).get(s);f&&(a(this,d).set(s,f.effect),a(this,o).delete(s),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),r=f.effect)}for(const[i,n]of a(this,h)){if(a(this,h).delete(i),i===e)break;const c=a(this,o).get(n);c&&(y(c.effect),a(this,o).delete(n))}for(const[i,n]of a(this,d)){if(i===s||a(this,_).has(i))continue;const c=()=>{if(Array.from(a(this,h).values()).includes(i)){var b=document.createDocumentFragment();O(n,b),b.append(N()),a(this,o).set(i,{effect:n,fragment:b})}else y(n);a(this,_).delete(i),a(this,d).delete(i)};a(this,p)||!r?(a(this,_).add(i),U(n,c,!1)):c()}}});l(this,g,e=>{a(this,h).delete(e);const s=Array.from(a(this,h).values());for(const[r,f]of a(this,o))s.includes(r)||(y(f.effect),a(this,o).delete(r))});this.anchor=e,S(this,p,s)}ensure(e,s){var r=M,f=Y();if(s&&!a(this,d).has(e)&&!a(this,o).has(e))if(f){var i=document.createDocumentFragment(),n=N();i.append(n),a(this,o).set(e,{effect:R(()=>s(n)),fragment:i})}else a(this,d).set(e,R(()=>s(this.anchor)));if(a(this,h).set(r,e),f){for(const[c,u]of a(this,d))c===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[c,u]of a(this,o))c===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(a(this,v)),r.ondiscard(a(this,g))}else k&&(this.anchor=I),a(this,v).call(this)}}h=new WeakMap,d=new WeakMap,o=new WeakMap,_=new WeakMap,p=new WeakMap,v=new WeakMap,g=new WeakMap;function ae(t,e,s=!1){k&&H();var r=new V(t),f=s?J:0;function i(n,c){if(k){const b=L(t)===P;if(n===b){var u=W();X(u),r.anchor=u,B(!1),r.ensure(n,c),B(!0);return}}r.ensure(n,c)}j(()=>{var n=!1;e((c,u=!0)=>{n=!0,i(u,c)}),n||i(!1,null)},f)}let m=!1,T=Symbol();function re(t,e,s){const r=s[e]??(s[e]={store:null,source:Z(void 0),unsubscribe:D});if(r.store!==t&&!(T in s))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=D;else{var f=!0;r.unsubscribe=K(t,i=>{f?r.source.v=i:$(r.source,i)}),f=!1}return t&&T in s?Q(t):q(r.source)}function ie(){const t={};function e(){z(()=>{for(var s in t)t[s].unsubscribe();G(t,T,{enumerable:!1,value:!0})})}return[t,e]}function ne(t){var e=m;try{return m=!1,[t(),m]}finally{m=e}}export{V as B,re as a,ne as c,ae as i,ie as s};
